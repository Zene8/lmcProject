/* === Base Styles & Variables === */
:root {
    -font-main: "Segoe UI", Arial, sans-serif;

    /* Light Theme Colors */
    -fx-light-bg-primary: #F8F8F8; /* Main background */
    -fx-light-bg-secondary: #FFFFFF; /* Content areas, editor background */
    -fx-light-bg-tertiary: #F0F0F0; /* Headers, toolbars, selected tab background */
    -fx-light-text-primary: #000000; /* Black text */
    -fx-light-text-secondary: #555555; /* Secondary text, less important info */
    -fx-light-border-primary: #CCCCCC; /* Grey lines for separation */
    -fx-light-accent-primary: #87CEEB; /* Light Sky Blue */
    -fx-light-accent-secondary: #6495ED; /* Cornflower Blue (slightly darker sky blue) */
    -fx-light-error: #D32F2F; /* Red */

    /* Default (Light) Theme Application */
    -fx-background-color: -fx-light-bg-primary;
    -fx-text-fill: -fx-light-text-primary;
    -fx-border-color: -fx-light-border-primary;
    -fx-accent-color: -fx-light-accent-primary;
    -fx-accent-color-hover: -fx-light-accent-secondary;
    -fx-error-color: -fx-light-error;
}

.root.dark-mode {
    /* Dark Theme Colors */
    -fx-dark-bg-primary: #1A1A2E; /* Dark Blue/Black */
    -fx-dark-bg-secondary: #16213E; /* Slightly darker blue */
    -fx-dark-bg-tertiary: #0F3460; /* Even darker blue */
    -fx-dark-text-primary: #FFFFFF; /* White text */
    -fx-dark-text-secondary: #A0A0A0; /* Medium light grey */
    -fx-dark-border-primary: #3C3C3C; /* Grey lines for separation */
    -fx-dark-accent-primary: #007ACC; /* Ocean Blue (VS Code Blue) */
    -fx-dark-accent-secondary: #005A9E; /* Darker Ocean Blue */
    -fx-dark-error: #F44336; /* Red */

    /* Dark Theme Application */
    -fx-background-color: -fx-dark-bg-primary;
    -fx-text-fill: -fx-dark-text-primary;
    -fx-border-color: -fx-dark-border-primary;
    -fx-accent-color: -fx-dark-accent-primary;
    -fx-accent-color-hover: -fx-dark-accent-secondary;
    -fx-error-color: -fx-dark-error;
}

/* === Theme Application to Components === */
.root {
    -fx-font-family: -font-main;
    -fx-font-size: 14px;
}

/* General Backgrounds and Text */
.root, .sidebar, .console, .code-area, .tree-view, .tab-pane .tab-content-area, .titled-pane > *.content, .text-field, .find-replace-popup {
    -fx-background-color: -fx-background-color;
    -fx-text-fill: -fx-text-fill;
}

/* Headers and Toolbars */
.menu-bar, .tab-header-background, .titled-pane > .title, .control-panel, .toggle-button {
    -fx-background-color: -fx-light-bg-tertiary;
}

.dark-mode .menu-bar, .dark-mode .tab-header-background, .dark-mode .titled-pane > .title, .dark-mode .control-panel, .dark-mode .toggle-button {
    -fx-background-color: -fx-dark-bg-tertiary;
}

/* Borders and Dividers */
.sidebar, .console, .split-pane-divider, .titled-pane > *.content, .text-field, .find-replace-popup {
    -fx-border-color: -fx-border-color;
}

/* Text Colors */
.label, .menu-bar .label, .titled-pane > .title > .text, .tree-cell, .tab-label, .text-field {
    -fx-text-fill: -fx-text-fill;
}

/* Accent Colors */
.button, .slider .thumb, .tab:selected, .toggle-button:selected {
    -fx-background-color: -fx-accent-color;
}

.button:hover, .menu:hover, .menu-item:hover, .menu:showing, .toggle-button:hover {
    -fx-background-color: -fx-accent-color-hover;
}

.tab:selected {
    -fx-border-color: -fx-accent-color;
}

/* Specific Overrides/Refinements */
.sidebar {
    -fx-border-width: 0 1px 0 0;
    -fx-padding: 5px;
}

.sidebar.right {
    -fx-border-width: 0 0 0 1px;
}

.console {
    -fx-border-width: 1px 0 0 0;
    -fx-padding: 5px;
}

.split-pane-divider {
    -fx-padding: 0 1px;
}

.tab {
    -fx-padding: 8px 16px;
    -fx-border-color: transparent;
    -fx-focus-color: transparent;
    -fx-faint-focus-color: transparent;
}

.tab:selected {
    -fx-border-width: 2px 0 0 0;
}

.tab-label {
    -fx-text-fill: -fx-text-fill;
}

.tab:selected .tab-label {
    -fx-text-fill: -fx-text-fill;
}

.titled-pane > .title {
    -fx-padding: 8px;
}

.titled-pane > .title > .text {
    -fx-font-weight: bold;
}

.titled-pane > *.content {
    -fx-padding: 0;
    -fx-border-width: 1px 0 0 0;
}

.button {
    -fx-text-fill: white;
    -fx-font-weight: bold;
    -fx-padding: 6px 12px;
    -fx-background-radius: 3px;
    -fx-border-width: 0;
}

.icon-button {
    -fx-background-color: transparent;
    -fx-padding: 4px;
    -fx-background-radius: 3px;
}

.icon-button:hover {
    -fx-background-color: -fx-light-bg-tertiary;
}

.dark-mode .icon-button:hover {
    -fx-background-color: -fx-dark-bg-tertiary;
}

.code-area {
    -fx-font-family: "Consolas", "Monaco", monospace;
}

.paragraph-box:has-caret {
    -fx-background-color: -fx-light-bg-tertiary;
}

.dark-mode .paragraph-box:has-caret {
    -fx-background-color: -fx-dark-bg-tertiary;
}

.error-icon {
    -fx-fill: -fx-error-color;
}

.current-line {
    -fx-background-color: rgba(255, 0, 0, 0.1);
}

.dark-mode .current-line {
    -fx-background-color: rgba(255, 0, 0, 0.2);
}

.tree-cell:selected {
    -fx-background-color: -fx-accent-color;
}

.tree-cell:selected .text {
    -fx-fill: white;
}

.control-panel {
    -fx-padding: 5px;
    -fx-spacing: 10px;
    -fx-alignment: CENTER_RIGHT;
}

.slider .track {
    -fx-background-color: -fx-border-color;
    -fx-pref-height: 4px;
}

.slider .thumb {
    -fx-background-color: -fx-accent-color;
    -fx-background-radius: 50%;
    -fx-pref-width: 12px;
    -fx-pref-height: 12px;
}

.slider .axis {
    -fx-tick-label-fill: -fx-text-fill;
}

.toggle-button {
    -fx-background-radius: 3px;
    -fx-padding: 6px 12px;
}

.status-bar {
    -fx-background-color: -fx-accent-color;
    -fx-text-fill: white;
    -fx-padding: 5px 10px;
    -fx-font-size: 12px;
}

.text-field {
    -fx-background-radius: 3px;
    -fx-padding: 5px;
    -fx-border-width: 1px;
}